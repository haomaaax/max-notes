{{- /* Footer custom content area start */ -}}
<!-- Email Subscription -->
<div class="subscribe-section" style="max-width: 500px; margin: 40px auto; padding: 30px 20px; text-align: center; border-top: 1px solid var(--border);">
  <h3 style="margin-bottom: 10px; font-size: 20px;">Subscribe for Updates</h3>
  <p style="margin-bottom: 20px; color: var(--secondary); font-size: 14px;">Get notified when new posts are published</p>

  <form id="subscribe-form" style="display: flex; gap: 10px; max-width: 400px; margin: 0 auto;">
    <input
      type="email"
      id="subscribe-email"
      placeholder="your@email.com"
      required
      style="flex: 1; padding: 10px 15px; border: 1px solid var(--border); border-radius: 4px; font-size: 14px;"
    >
    <button
      type="submit"
      style="padding: 10px 20px; background: #1C3A52; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500;"
    >
      Subscribe
    </button>
  </form>

  <div id="subscribe-message" style="margin-top: 15px; font-size: 14px;"></div>
</div>

<script>
document.getElementById('subscribe-form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const email = document.getElementById('subscribe-email').value;
  const messageDiv = document.getElementById('subscribe-message');
  const submitBtn = e.target.querySelector('button[type="submit"]');

  // Disable button during submission
  submitBtn.disabled = true;
  submitBtn.textContent = 'Subscribing...';

  try {
    const response = await fetch('https://api.sparkler.club/subscribe', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email }),
    });

    const data = await response.json();

    if (data.success || data.message) {
      messageDiv.style.color = '#2e7d32';
      messageDiv.textContent = data.message || 'Check your email to confirm!';
      e.target.reset();
    } else if (data.error) {
      messageDiv.style.color = '#d32f2f';
      messageDiv.textContent = data.error;
    }
  } catch (error) {
    messageDiv.style.color = '#d32f2f';
    messageDiv.textContent = 'Something went wrong. Please try again.';
  } finally {
    submitBtn.disabled = false;
    submitBtn.textContent = 'Subscribe';
  }
});
</script>
{{- /* Footer custom content area end */ -}}
